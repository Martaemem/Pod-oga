<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kaszëbskô Gra - Przedolmaczë wërazë</title>
  <!-- ... (style bez zmian, jak w Twoim pliku) ... -->
  <style>
    /* ... (Twój dotychczasowy styl - nie zmieniam, bo dotyczy tylko wyglądu) ... */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #0f2167 0%, #1e3a8a 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    .game-container {
      background: linear-gradient(to bottom, #1e40af, #1e3a8a);
      color: gold;
      text-align: center;
      padding: 60px;
      border-radius: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
      width: 100%;
      max-width: 1400px;
      min-height: 900px;
      position: relative;
      overflow: hidden;
      border: 4px solid rgba(255, 215, 0, 0.5);
    }
    /* ... reszta stylów bez zmian ... */
  </style>
</head>
<body>
  <div class="game-container">
    <!-- ... (wszystko bez zmian do <script>) ... -->
    <button class="back-btn" onclick="window.location.href='tournament.html'">PÒDŁOGA</button>
    <div id="welcomeScreen" class="welcome-screen">
      <h1 class="welcome-title">Kaszëbskô Gra - Przedolmaczë wërazë</h1>
      <div class="player-input">
        <label for="player1Name">Miono Grôcza 1:</label>
        <input type="text" id="player1Name" placeholder="Grôcz 1" maxlength="20">
      </div>
      <div class="player-input">
        <label for="player2Name">Miono Grôcza 2:</label>
        <input type="text" id="player2Name" placeholder="Grôcz 2" maxlength="20">
      </div>
      <button class="start-btn" onclick="startGame()">ZACZÃC GRÃ</button>
    </div>
    <div class="score-board">
      <div id="player1" class="player-card active">
        <div class="player-name">Grôcz 1</div>
        <div class="player-score">0</div>
      </div>
      <div id="player2" class="player-card">
        <div class="player-name">Grôcz 2</div>
        <div class="player-score">0</div>
      </div>
    </div>
    <h2 id="categoryTitle">Przedolmaczë wërazë</h2>
    <div class="progress-bar">
      <div id="progressBar" class="progress"></div>
    </div>
    <div class="word-container">
      <div id="word" class="word"></div>
      <div id="answerText" class="answer"></div>
    </div>
    <div id="timer" class="timer"></div>
    <div id="buttons" class="button-group">
      <button onclick="stop()">STOP</button>
      <button onclick="pass()">Jô paszëjã</button>
    </div>
    <div id="reveal" class="button-group" style="display:none;">
      <button onclick="show()">PÒKÔŻ ÒDPÒWIESC</button>
    </div>
    <div id="result" class="button-group" style="display:none;">
      <button onclick="correct()">BËLNÔ ÒDPÒWIESC</button>
      <button onclick="wrong()">ZMIŁKÒWÔ ÒDPÒWIESC</button>
    </div>
    <div id="msg" class="message"></div>
    <div id="gameOver" class="game-over">
      <h2>KÙNC GRË</h2>
      <table class="results-table">
        <thead>
          <tr>
            <th>Grôcz</th>
            <th>Pùnktë</th>
          </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
      </table>
      <button class="restart-btn" onclick="restartGame()">ZACZÃC ZNOWA</button>
    </div>
  </div>
  <script>
    // Przykładowa baza pytań - bez zmian
    const categoryQuestions = {
      "MÙZYKA": [
        { word: "akòrdzéon", answer: "akordeon" },
        { word: "pianino", answer: "pianino" },
        { word: "trùbka", answer: "trąbka" },
        { word: "gitara", answer: "gitara" },
        { word: "bębny", answer: "perkusja" }
      ],
      "zwiérzãta": [
        { word: "miedwédzk", answer: "niedźwiedź" },
        { word: "mùża", answer: "krowa" },
        { word: "gùlôk", answer: "indyk" },
        { word: "kòt", answer: "kot" },
        { word: "pies", answer: "pies" }
        { word: "mòtilk", answer: "motyl" }
        { word: "wieszczówka", answer: "wiewiórka" }
        { word: "kôłp", answer: "łabedź" }
        { word: "jeż", answer: "jéż" }
        { word: "kaczka", answer: "kôczã" }
        { word: "skrzëpëczka", answer: "pies" }
        
      ],
      // ... reszta kategorii bez zmian ...
      "NÔTËRA": [
        { word: "pióro", answer: "pióro" },
        { word: "notes", answer: "notes" },
        { word: "kùg", answer: "ołówek" },
        { word: "długopis", answer: "długopis" },
        { word: "kartka", answer: "kartka" }
      ]
    };

    // Pobierz kategorię lub domyślnie "ZWIERZĄTA"
    const selectedCategory = localStorage.getItem("selectedCategory") || "ZWIERZĄTA";
    const questions = categoryQuestions[selectedCategory] || categoryQuestions["ZWIERZĄTA"];
    document.getElementById('categoryTitle').innerText = selectedCategory;

    // Stan gry
    let currentIndex = 0;
    let currentPlayer = 1;
    let timer = 10;
    let timerInterval;
    let scores = { 1: 0, 2: 0 };
    let playerNames = { 1: "Grôcz 1", 2: "Grôcz 2" };
    let playerQuestions = { 1: [], 2: [] }; // Losowe pytania dla każdego gracza

    const welcomeScreenEl = document.getElementById("welcomeScreen");
    const player1NameInput = document.getElementById("player1Name");
    const player2NameInput = document.getElementById("player2Name");
    const wordEl = document.getElementById("word");
    const answerTextEl = document.getElementById("answerText");
    const timerEl = document.getElementById("timer");
    const buttonsEl = document.getElementById("buttons");
    const revealEl = document.getElementById("reveal");
    const resultEl = document.getElementById("result");
    const messageEl = document.getElementById("msg");
    const player1El = document.getElementById("player1");
    const player2El = document.getElementById("player2");
    const gameOverEl = document.getElementById("gameOver");
    const resultsBodyEl = document.getElementById("resultsBody");
    const progressBarEl = document.getElementById("progressBar");

    // Funkcja do losowania n pytań z tablicy
    function drawRandomQuestions(array, n) {
      const arr = [...array];
      const res = [];
      for (let i = 0; i < n && arr.length > 0; i++) {
        const idx = Math.floor(Math.random() * arr.length);
        res.push(arr[idx]);
        arr.splice(idx, 1);
      }
      return res;
    }

    function startGame() {
      const player1Name = player1NameInput.value.trim() || "Grôcz 1";
      const player2Name = player2NameInput.value.trim() || "Grôcz 2";
      playerNames = { 1: player1Name, 2: player2Name };
      document.querySelector("#player1 .player-name").innerText = playerNames[1];
      document.querySelector("#player2 .player-name").innerText = playerNames[2];
      welcomeScreenEl.classList.add("hide");
      initGame();
    }

    function initGame() {
      // Każdy gracz dostaje 6 losowych pytań (mogą się powtarzać między graczami)
      playerQuestions[1] = drawRandomQuestions(questions, 6);
      playerQuestions[2] = drawRandomQuestions(questions, 6);
      currentIndex = 0;
      currentPlayer = 1;
      scores = { 1: 0, 2: 0 };
      updateScoreDisplay();
      setActivePlayer(1);
      gameOverEl.classList.remove("show");
      answerTextEl.innerText = "";
      updateProgressBar();
      setQuestion();
    }

    function setQuestion() {
      if (currentIndex >= 6) { endGame(); return; }
      const currentQ = playerQuestions[currentPlayer][currentIndex];
      wordEl.innerText = currentQ.word;
      answerTextEl.innerText = "";
      timerEl.innerText = "";
      timerEl.classList.remove("warning");
      messageEl.innerText = "";
      messageEl.className = "message";
      buttonsEl.style.display = "block";
      revealEl.style.display = "none";
      resultEl.style.display = "none";
      timer = 10;
      clearInterval(timerInterval);
      setActivePlayer(currentPlayer);
      updateProgressBar();
      startTimer();
    }

    function updateProgressBar() {
      const progress = (currentIndex / 6) * 100;
      progressBarEl.style.width = `${progress}%`;
    }

    function startTimer() {
      timerEl.innerText = `Czas: ${timer}s`;
      timerInterval = setInterval(() => {
        timer--;
        timerEl.innerText = `Czas: ${timer}s`;
        if (timer <= 3) timerEl.classList.add("warning");
        if (timer <= 0) { clearInterval(timerInterval); wrong(); }
      }, 1000);
    }

    function stop() {
      buttonsEl.style.display = "none";
      revealEl.style.display = "block";
      clearInterval(timerInterval);
      timerEl.innerText = "";
    }
    function pass() {
      buttonsEl.style.display = "none";
      clearInterval(timerInterval);
      timerEl.innerText = "";
      updateScore(-2);
      showMessage("JÔ PASZËJã -2 pùnktë", "negative");
      next();
    }
    function show() {
      revealEl.style.display = "none";
      resultEl.style.display = "block";
      const currentQ = playerQuestions[currentPlayer][currentIndex];
      answerTextEl.innerText = currentQ.answer;
    }
    function correct() {
      updateScore(5);
      showMessage("BËLNÔ ÒDPÒWIESC +5 pùnktów", "positive");
      resultEl.style.display = "none";
      next();
    }
    function wrong() {
      clearInterval(timerInterval);
      updateScore(-3);
      showMessage("ZMIŁKÒWÔ ÒDPÒWIESC -3 pùnktë", "negative");
      resultEl.style.display = "none";
      next();
    }
    function next() {
      currentPlayer = currentPlayer === 1 ? 2 : 1;
      if (currentPlayer === 1) currentIndex++; // obaj gracze odpowiadają na zestaw 6 pytań naprzemiennie
      setTimeout(setQuestion, 1500);
    }
    function updateScore(points) {
      scores[currentPlayer] += points;
      updateScoreDisplay();
    }
    function updateScoreDisplay() {
      document.querySelector("#player1 .player-score").innerText = scores[1];
      document.querySelector("#player2 .player-score").innerText = scores[2];
    }
    function setActivePlayer(player) {
      player1El.classList.toggle("active", player === 1);
      player2El.classList.toggle("active", player === 2);
    }
    function showMessage(text, type) {
      messageEl.innerText = text;
      messageEl.className = `message ${type}`;
    }
    function endGame() {
      let winner = 0;
      if (scores[1] > scores[2]) winner = 1;
      else if (scores[2] > scores[1]) winner = 2;
      resultsBodyEl.innerHTML = '';
      for (let player = 1; player <= 2; player++) {
        const row = document.createElement('tr');
        if (winner === player) row.classList.add('winner');
        const playerCell = document.createElement('td');
        playerCell.innerText = playerNames[player];
        const scoreCell = document.createElement('td');
        scoreCell.innerText = scores[player];
        row.appendChild(playerCell);
        row.appendChild(scoreCell);
        resultsBodyEl.appendChild(row);
      }
      if (winner === 0) {
        const tieRow = document.createElement('tr');
        const tieCell = document.createElement('td');
        tieCell.colSpan = 2;
        tieCell.innerText = "Remis!";
        tieCell.classList.add('winner');
        tieRow.appendChild(tieCell);
        resultsBodyEl.appendChild(tieRow);
      }
      gameOverEl.classList.add("show");
    }
    function restartGame() {
      gameOverEl.classList.remove("show");
      welcomeScreenEl.classList.remove("hide");
      player1NameInput.value = playerNames[1];
      player2NameInput.value = playerNames[2];
    }
  </script>
</body>
</html>
